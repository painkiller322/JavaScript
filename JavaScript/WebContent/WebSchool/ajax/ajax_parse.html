<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ajax_parse.html</title>
</head>

<body id="bdy">

    <script>
        var xhtp = new XMLHttpRequest();
        xhtp.onreadystatechange = function () {
            if (xhtp.readyState == 4 && xhtp.status == 200) {//연결이 잘 되었으면
                // console.log(this.responseText);//텍스트 타입으로 받음
                var obj = JSON.parse(this.responseText);

                console.log(obj);
                // console.log("name", obj.name);
                // console.log("age->", obj.ahe);
                // console.log("pets->", obj.pets[0].animal, obj.pets[0].name);

                // 테이블만들기
                var $table = document.createElement("table");//$는 변수이름
                $table.setAttribute("id", "tbl");
                $table.setAttribute("border", "1");
                // 제목넣기
                var th1 = document.createElement("th");
                var val1 = document.createTextNode("id");
                th1.appendChild(val1);
                var th2 = document.createElement("th");
                var val2 = document.createTextNode("first_name");
                th2.appendChild(val2);
                var th3 = document.createElement("th");
                var val3 = document.createTextNode("last_name");
                th3.appendChild(val3);
                var th4 = document.createElement("th");
                var val4 = document.createTextNode("email");
                th4.appendChild(val4);
                var th5 = document.createElement("th");
                var val5 = document.createTextNode("gneder");
                th5.appendChild(val5);
                var th6 = document.createElement("th");
                var val6 = document.createTextNode("ip_adress");
                th6.appendChild(val6);
                var tr = document.createElement("tr");
                tr.append(th1, th2, th3, th4, th5, th6);
                $table.append(tr);

                // 내용넣기
                for (var i = 0; i < obj.length; i++) {
                    var td1 = document.createElement("td");
                    var tdVal1 = document.createTextNode(obj[i].id);
                    td1.appendChild(tdVal1);
                    var td2 = document.createElement("td");
                    var tdVal2 = document.createTextNode(obj[i].first_name);
                    td2.appendChild(tdVal2);
                    var td3 = document.createElement("td");
                    var tdVal3 = document.createTextNode(obj[i].last_name);
                    td3.appendChild(tdVal3);
                    var td4 = document.createElement("td");
                    var tdVal4 = document.createTextNode(obj[i].email);
                    td4.appendChild(tdVal4);
                    var td5 = document.createElement("td");
                    var tdVal5 = document.createTextNode(obj[i].gender);
                    td5.appendChild(tdVal5);
                    var td6 = document.createElement("td");
                    var tdVal6 = document.createTextNode(obj[i].ip_address);
                    td6.appendChild(tdVal6);
                    var tr1 = document.createElement("tr");
                    tr1.append(td1, td2, td3, td4, td5, td6);
                    $table.append(tr1);

                    document.getElementById("bdy").append($table);


                }
            }
        }
        xhtp.open("get", "MOCK_DATA.json");//서버에 json파일을 요청
        xhtp.send();


    </script>
</body>

</html>